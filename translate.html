<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مترجم الصوت الذكي - Voice Translator</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#667eea">
    <link rel="icon" href="logo-new.svg" type="image/svg+xml">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&family=Amiri:wght@400;700&family=Noto+Sans+Arabic:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="مترجم الصوت">
    <link rel="apple-touch-icon" href="icon-192x192.png">
    <style>
        .header-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 10px 0;
        }
        
        .back-btn, .login-btn {
            padding: 8px 16px;
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
            text-decoration: none;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
            border: 1px solid rgba(102, 126, 234, 0.3);
        }
        
        .back-btn:hover, .login-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-1px);
        }
        
        @media (max-width: 768px) {
            .header-nav {
                margin-bottom: 15px;
            }
            
            .back-btn, .login-btn {
                padding: 6px 12px;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-nav">
                <a href="index.html" class="back-btn tooltip" data-tooltip="العودة للصفحة الرئيسية" title="العودة للرئيسية">🏠 الرئيسية</a>
                <div style="display: flex; gap: 10px;">
                    <a href="settings.html" class="login-btn tooltip" data-tooltip="إعدادات التطبيق والتخصيص" title="الإعدادات">⚙️ الإعدادات</a>
                    <a href="login.html" class="login-btn tooltip" data-tooltip="تسجيل الدخول أو إنشاء حساب جديد" title="تسجيل الدخول">👤 تسجيل الدخول</a>
                </div>
            </div>
            <div style="display: flex; align-items: center; justify-content: center; gap: 15px; margin-bottom: 10px;">
                <img src="logo-new.svg" alt="Logo" style="width: 80px; height: 80px; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));">
                <h1 style="margin: 0;">مترجم الصوت الذكي</h1>
            </div>
            <p>ترجمة فورية بالصوت والنص مع ذكاء اصطناعي متقدم</p>
        </header>

        <main>


            <div class="language-selection">
                <div class="language-group">
                    <label for="source-lang">اللغة المصدر:</label>
                    <select id="source-lang">
                        <option value="ar">العربية</option>
                        <option value="en">English</option>
                        <option value="fr">Français</option>
                        <option value="es">Español</option>
                        <option value="de">Deutsch</option>
                        <option value="it">Italiano</option>
                        <option value="pt">Português</option>
                        <option value="ru">Русский</option>
                        <option value="ja">日本語</option>
                        <option value="ko">한국어</option>
                        <option value="zh">中文</option>
                        <option value="hi">हिन्दी</option>
                        <option value="tr">Türkçe</option>
                        <option value="nl">Nederlands</option>
                        <option value="sv">Svenska</option>
                        <option value="da">Dansk</option>
                        <option value="no">Norsk</option>
                        <option value="fi">Suomi</option>
                        <option value="pl">Polski</option>
                        <option value="cs">Čeština</option>
                        <option value="hu">Magyar</option>
                        <option value="ro">Română</option>
                        <option value="bg">Български</option>
                        <option value="hr">Hrvatski</option>
                        <option value="sk">Slovenčina</option>
                        <option value="sl">Slovenščina</option>
                        <option value="et">Eesti</option>
                        <option value="lv">Latviešu</option>
                        <option value="lt">Lietuvių</option>
                        <option value="mt">Malti</option>
                        <option value="ga">Gaeilge</option>
                        <option value="cy">Cymraeg</option>
                        <option value="eu">Euskera</option>
                        <option value="ca">Català</option>
                        <option value="gl">Galego</option>
                        <option value="is">Íslenska</option>
                        <option value="mk">Македонски</option>
                        <option value="sq">Shqip</option>
                        <option value="sr">Српски</option>
                        <option value="bs">Bosanski</option>
                        <option value="me">Crnogorski</option>
                        <option value="he">עברית</option>
                        <option value="fa">فارسی</option>
                        <option value="ur">اردو</option>
                        <option value="bn">বাংলা</option>
                        <option value="ta">தமிழ்</option>
                        <option value="te">తెలుగు</option>
                        <option value="ml">മലയാളം</option>
                        <option value="kn">ಕನ್ನಡ</option>
                        <option value="gu">ગુજરાતી</option>
                        <option value="pa">ਪੰਜਾਬੀ</option>
                        <option value="or">ଓଡ଼ିଆ</option>
                        <option value="as">অসমীয়া</option>
                        <option value="ne">नेपाली</option>
                        <option value="si">සිංහල</option>
                        <option value="my">မြန်မာ</option>
                        <option value="km">ខ្មែរ</option>
                        <option value="lo">ລາວ</option>
                        <option value="ka">ქართული</option>
                        <option value="hy">Հայերեն</option>
                        <option value="az">Azərbaycan</option>
                        <option value="kk">Қазақ</option>
                        <option value="ky">Кыргыз</option>
                        <option value="uz">O'zbek</option>
                        <option value="tg">Тоҷикӣ</option>
                        <option value="mn">Монгол</option>
                        <option value="th">ไทย</option>
                        <option value="vi">Tiếng Việt</option>
                        <option value="id">Bahasa Indonesia</option>
                        <option value="ms">Bahasa Melayu</option>
                        <option value="tl">Filipino</option>
                        <option value="sw">Kiswahili</option>
                        <option value="am">አማርኛ</option>
                        <option value="yo">Yorùbá</option>
                        <option value="ig">Igbo</option>
                        <option value="ha">Hausa</option>
                        <option value="zu">isiZulu</option>
                        <option value="af">Afrikaans</option>
                    </select>
                </div>

                <div class="swap-btn">
                    <button id="swap-languages" class="tooltip" data-tooltip="تبديل اللغات" title="تبديل اللغات">
                        🔄
                    </button>
                </div>

                <div class="language-group">
                    <label for="target-lang">اللغة الهدف:</label>
                    <select id="target-lang">
                        <option value="en">English</option>
                        <option value="ar">العربية</option>
                        <option value="fr">Français</option>
                        <option value="es">Español</option>
                        <option value="de">Deutsch</option>
                        <option value="it">Italiano</option>
                        <option value="pt">Português</option>
                        <option value="ru">Русский</option>
                        <option value="ja">日本語</option>
                        <option value="ko">한국어</option>
                        <option value="zh">中文</option>
                        <option value="hi">हिन्दी</option>
                        <option value="tr">Türkçe</option>
                        <option value="nl">Nederlands</option>
                        <option value="sv">Svenska</option>
                        <option value="da">Dansk</option>
                        <option value="no">Norsk</option>
                        <option value="fi">Suomi</option>
                        <option value="pl">Polski</option>
                        <option value="cs">Čeština</option>
                        <option value="hu">Magyar</option>
                        <option value="ro">Română</option>
                        <option value="bg">Български</option>
                        <option value="hr">Hrvatski</option>
                        <option value="sk">Slovenčina</option>
                        <option value="sl">Slovenščina</option>
                        <option value="et">Eesti</option>
                        <option value="lv">Latviešu</option>
                        <option value="lt">Lietuvių</option>
                        <option value="mt">Malti</option>
                        <option value="ga">Gaeilge</option>
                        <option value="cy">Cymraeg</option>
                        <option value="eu">Euskera</option>
                        <option value="ca">Català</option>
                        <option value="gl">Galego</option>
                        <option value="is">Íslenska</option>
                        <option value="mk">Македонски</option>
                        <option value="sq">Shqip</option>
                        <option value="sr">Српски</option>
                        <option value="bs">Bosanski</option>
                        <option value="me">Crnogorski</option>
                        <option value="he">עברית</option>
                        <option value="fa">فارسی</option>
                        <option value="ur">اردو</option>
                        <option value="bn">বাংলা</option>
                        <option value="ta">தமிழ்</option>
                        <option value="te">తెలుగు</option>
                        <option value="ml">മലയാളം</option>
                        <option value="kn">ಕನ್ನಡ</option>
                        <option value="gu">ગુજરાતી</option>
                        <option value="pa">ਪੰਜਾਬੀ</option>
                        <option value="or">ଓଡ଼ିଆ</option>
                        <option value="as">অসমীয়া</option>
                        <option value="ne">नेपाली</option>
                        <option value="si">සිංහල</option>
                        <option value="my">မြန်မာ</option>
                        <option value="km">ខ្មែរ</option>
                        <option value="lo">ລາວ</option>
                        <option value="ka">ქართული</option>
                        <option value="hy">Հայերեն</option>
                        <option value="az">Azərbaycan</option>
                        <option value="kk">Қазақ</option>
                        <option value="ky">Кыргыз</option>
                        <option value="uz">O'zbek</option>
                        <option value="tg">Тоҷикӣ</option>
                        <option value="mn">Монгол</option>
                        <option value="th">ไทย</option>
                        <option value="vi">Tiếng Việt</option>
                        <option value="id">Bahasa Indonesia</option>
                        <option value="ms">Bahasa Melayu</option>
                        <option value="tl">Filipino</option>
                        <option value="sw">Kiswahili</option>
                        <option value="am">አማርኛ</option>
                        <option value="yo">Yorùbá</option>
                        <option value="ig">Igbo</option>
                        <option value="ha">Hausa</option>
                        <option value="zu">isiZulu</option>
                        <option value="af">Afrikaans</option>
                    </select>
                </div>
            </div>



            <div class="translation-area">
                <div class="input-section">
                    <div class="text-area-container">
                        <textarea id="source-text" placeholder="اكتب النص هنا أو استخدم الميكروفون للتسجيل الصوتي..."></textarea>
                        <div class="char-counter">
                            <span id="char-count">0</span> / 5000
                        </div>
                    </div>
                    
                    <div class="control-buttons">
                        <button id="mic-btn" class="control-btn mic-btn tooltip" data-tooltip="ابدأ التسجيل الصوتي للترجمة" title="تسجيل صوتي">
                            <span class="mic-icon">🎤</span>
                            <span class="mic-text">اضغط للتسجيل</span>
                        </button>
                        
                        <div class="image-capture-container">
                            <button id="image-capture-btn" class="control-btn image-capture-btn tooltip" data-tooltip="التقاط أو رفع صورة للترجمة" title="التقاط أو تحميل صورة">
                                📷 صورة
                                <span class="dropdown-arrow">▼</span>
                            </button>
                            <div id="image-capture-menu" class="image-capture-menu">
                                <div class="menu-item tooltip" data-tooltip="اختر صورة من جهازك" data-action="upload">
                                    📁 تحميل صورة
                                </div>
                                <div class="menu-item tooltip" data-tooltip="التقط صورة باستخدام الكاميرا" data-action="camera">
                                    📸 فتح الكاميرا
                                </div>
                            </div>
                        </div>
                        
                        <button id="clear-btn" class="control-btn tooltip" data-tooltip="مسح النص المدخل" title="مسح النص">
                            🗑️ مسح
                        </button>
                        
                        <input type="file" id="image-input" accept="image/*" style="display: none;">
                    </div>
                </div>

                <div class="output-section">
                    <div class="text-area-container">
                        <div id="translated-text" class="translated-text">الترجمة ستظهر هنا...</div>
                    </div>
                    
                    <div class="control-buttons">
                        <button id="speak-btn" class="control-btn tooltip" data-tooltip="استمع للنص المترجم" title="نطق الترجمة">
                            🔊 <span class="speak-text">استمع للترجمة</span>
                        </button>
                        
                        <button id="copy-btn" class="control-btn tooltip" data-tooltip="نسخ النص المترجم" title="نسخ الترجمة">
                            📋 نسخ
                        </button>
                        
                        <button id="add-favorite" class="control-btn tooltip" data-tooltip="حفظ الترجمة في المفضلة" title="إضافة للمفضلة">
                            ⭐ مفضلة
                        </button>
                        
                        <label class="conversation-mode-toggle tooltip" data-tooltip="تفعيل وضع المحادثة الثنائية">
                            <input type="checkbox" id="conversation-mode">
                            💬 محادثة
                        </label>
                        
                        <button id="clear-conversation" class="control-btn clear-conversation-btn tooltip" data-tooltip="مسح تاريخ المحادثة" title="مسح المحادثة">
                            🗑️ مسح المحادثة
                        </button>
                    </div>
                </div>
            </div>

            <div class="status-bar">
                <div id="status" class="status-text">جاهز للاستخدام</div>
            </div>

            <div class="favorites-section">
                <h3>العبارات المفضلة</h3>
                <div id="favorites-list" class="favorites-list">
                    <!-- العبارات المفضلة ستظهر هنا -->
                </div>
            </div>


        </main>
    </div>

    <!-- Tesseract.js for OCR functionality -->
    <script src="https://unpkg.com/tesseract.js@v4.1.1/dist/tesseract.min.js"></script>
    <script src="script.js"></script>
    
    <script>
        // تسجيل Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(registration => {
                        console.log('Service Worker registered successfully:', registration.scope);
                    })
                    .catch(error => {
                        console.log('Service Worker registration failed:', error);
                    });
            });
        }
    </script>
</body>
</html>